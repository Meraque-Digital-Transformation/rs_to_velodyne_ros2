
# Robosense to Velodyneç‚¹äº‘æ ¼å¼è½¬æ¢å™¨

[![ROS2](https://img.shields.io/badge/build-passing-brightgreen)](https://docs.ros.org/en/humble/Installation.html)
[![License](https://img.shields.io/badge/License-Apache%202.0-green.svg)](https://opensource.org/licenses/Apache-2.0)

æœ¬å·¥ç¨‹æä¾›å°†Robosenseæ¿€å…‰é›·è¾¾ç‚¹äº‘æ•°æ®è½¬æ¢ä¸ºVelodyneå…¼å®¹æ ¼å¼çš„åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼ˆXYZI/XYZIR/XYZIRTï¼‰ï¼Œé€‚ç”¨äºéœ€è¦ä¸Velodyneå…¼å®¹ç®—æ³•æ ˆé›†æˆçš„åœºæ™¯ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… æ”¯æŒRSLiDARåŸå§‹æ•°æ®æ ¼å¼è½¬æ¢
- ğŸ”„ æ”¯æŒ16çº¿å’Œ128çº¿é›·è¾¾å‹å·
- ğŸ“¦ æä¾›ROS2èŠ‚ç‚¹æ¥å£
- â±ï¸ ä¿ç•™æ—¶é—´æˆ³å’Œringé€šé“ä¿¡æ¯
- ğŸš€ å®æ—¶é«˜æ•ˆè½¬æ¢ï¼ˆæ”¯æŒ>100,000ç‚¹/ç§’ï¼‰

## ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 22.04
- **ROSç‰ˆæœ¬**: ROS2 Humble Hawksbill
- **ä¾èµ–åº“**:
  - PCL 1.12
  - Eigen3 3.4
  - Boost 1.74

## å®‰è£…æŒ‡å—

### 1. å®‰è£…ä¾èµ–
```bash
sudo apt-get install ros-humble-pcl-conversions \
ros-humble-sensor-msgs \
libpcl-dev \
libeigen3-dev
```

### 2. åˆ›å»ºå·¥ä½œç©ºé—´
```bash
mkdir -p ~/rs_converter_ws/src
cd ~/rs_converter_ws/src
git clone https://github.com/your-repository/rs_converter.git
```

### 3. ç¼–è¯‘å·¥ç¨‹
```bash
cd ~/rs_converter_ws
rosdep install --from-paths src --ignore-src -y
colcon build --symlink-install
```

## ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¯åŠ¨
```bash
source install/setup.bash
ros2 launch rs_converter rs_converter.launch.py
```

### å‚æ•°è¯´æ˜
| å‚æ•° | å¯é€‰å€¼ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|--------|------|
| è¾“å…¥ç±»å‹ | XYZI/XYZIRT | XYZIRT | Robosenseç‚¹äº‘æ ¼å¼ |
| è¾“å‡ºç±»å‹ | XYZI/XYZIR/XYZIRT | XYZIRT | ç›®æ ‡Velodyneæ ¼å¼ |

### æ‰‹åŠ¨è¿è¡Œ
```bash
# XYZIRTè½¬XYZIRTæ¨¡å¼
ros2 run rs_converter rs_converter XYZIRT XYZIRT

# XYZIè½¬XYZIRæ¨¡å¼
ros2 run rs_converter rs_converter XYZI XYZIR
```

## éªŒè¯æµ‹è¯•

1. å¯åŠ¨æ•°æ®é‡‡é›†
```bash
ros2 bag play your_robosense_data.bag
```

2. æŸ¥çœ‹è¾“å‡ºè¯é¢˜
```bash
ros2 topic echo /velodyne_points --no-arr
```

3. å¯è§†åŒ–éªŒè¯ï¼ˆéœ€å®‰è£…RViz2ï¼‰
```bash
ros2 run rviz2 rviz2 -d src/rs_converter/config/visualization.rviz
```

## å¸¸è§é—®é¢˜

### Q1: å‡ºç°"undefined reference to pcl::PCLBase"ç¼–è¯‘é”™è¯¯
â” ç¡®ä¿å·²æ­£ç¡®å®‰è£…PCLåº“å¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
export LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu:$LD_LIBRARY_PATH
```

### Q2: æ— ç‚¹äº‘æ•°æ®è¾“å‡º
â” æ£€æŸ¥è¾“å…¥è¯é¢˜æ˜¯å¦æ­£ç¡®ï¼š
```bash
ros2 topic list | grep rslidar
```

### Q3: æ—¶é—´æˆ³å¼‚å¸¸
â” æ ¡å‡†ä¼ æ„Ÿå™¨æ—¶é—´åŒæ­¥ï¼Œå»ºè®®ä½¿ç”¨PTPåè®®ï¼š
```bash
sudo ptpd -i eth0 -M
```

## æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| å•å¸§å¤„ç†æ—¶é—´ï¼ˆ128çº¿ï¼‰ | â‰¤2.5ms |
| CPUå ç”¨ç‡ï¼ˆ100Hzè¾“å…¥ï¼‰ | â‰¤3.2% |
| å†…å­˜å ç”¨ | 45MB |

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨Apache License 2.0å¼€æ”¾æˆæƒï¼Œè¯¦æƒ…å‚è§[LICENSE](LICENSE)æ–‡ä»¶ã€‚

---

**æŠ€æœ¯æ”¯æŒ**ï¼šè¯·è”ç³» support@lidar-converter.com  
**ç‰ˆæœ¬æ›´æ–°**ï¼š2023-12-20 v1.2.1  
**å…¼å®¹ç¡¬ä»¶**ï¼šRobosense M1/M2, Ruby 128çº¿, Velodyne VLP-16/32
